<% content_for :head do %>
  <%= render 'javascript' %>
<% end %>

<div class="header">
	<h1>Edit <%= @card.bank_name %> <%= @card.name %></h1>
	<h2>Change all of your cards details here</h2>
</div>

<div class="content">

  <p>
    <%= form_tag({:controller => 'cards', :action => 'update'}, {:method => "patch", :class => 'pure-form pure-form-aligned', :id => 'edit-card-form'}) do %>
      <div class="pure-control-group">
        <%= label_tag :bank_name, "Bank Name" %>
        <%= text_field_tag :bank_name, nil, name: 'bank_name', class: "pure-input-1-2", :required => true, placeholder: @card.bank_name %>
      </div>
      <div class="pure-control-group">
        <%= label_tag :card_name, "Card Name" %>
        <%= text_field_tag :card_name, nil, name: 'card_name', class: "pure-input-1-2", :required => true, placeholder: @card.name %>
      </div>
      <br>
      <div class="pure-control-group">
        <%= label_tag :issue_date, "Card Issue Date" %>
        <%= date_field :issue_date, nil, name: 'issue_date', class: "pure-input-1-2", placeholder: "1993-03-01" %>
      </div>
      <div class="pure-control-group">
        <%= label_tag :annual_fee, "Annual Fee" %>
        <%= text_field_tag :annual_fee, nil, name: 'annual_fee', class: "pure-input-1-2", placeholder: @card.annual_fee %>
      </div>
      <div class="pure-control-group">
        <%= label_tag :credit_limit, "Credit Limit" %>
        <%= text_field_tag :credit_limit, nil, name: 'credit_limit', class: "pure-input-1-2", placeholder: @card.credit_limit %>
      </div>
      <br>
      <div class="pure-control-group">
        <%= label_tag :card_number, "Card Number" %>
        <%= text_field_tag :card_number, nil, name: nil, class: "pure-input-1-2", :required => true, data: { 'braintree-name' => 'number'}  %>
      </div>
      <div class="pure-control-group">
        <%= label_tag :card_code, "Security Code" %>
        <%= text_field_tag :card_code, nil, name: nil, class: "pure-input-1-2", :required => true, data: { 'braintree-name' => 'cvv' } %>
      </div>
      <div class="pure-control-group">
        <%= label_tag :card_month, "Expiration Date" %>
        <%= select_month nil, { use_two_digit_numbers: true}, { name: nil, data: {'braintree-name' => 'expiration_month'} } %>
        <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+10}, { name: nil, data: {'braintree-name' => 'expiration_year'} } %>
      </div>
      <div class="pure-controls">
        <%= submit_tag 'Update Card', :class => 'pure-button pure-input-2-3 pure-button-primary' %>
      </div>
    <% end %>
  </p>